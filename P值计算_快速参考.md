# ⚡ P值计算 - 快速参考卡

---

## 🎯 P值计算的4个步骤

### 步骤1：计算标准误差（SE）
```
SE = √(SD₁²/n₁ + SD₂²/n₂)
```

### 步骤2：计算t值
```
t = (Mean₁ - Mean₂) / SE
```

### 步骤3：确定自由度（df）
```
df = n₁ + n₂ - 2
```

### 步骤4：查表或用软件得到P值
```
根据t值和df，查t分布表或用软件计算P值
```

---

## 📊 完整例子（一步一步）

### 原始数据
```
班级A：20个学生，平均82分，标准差8分
班级B：25个学生，平均78分，标准差10分
```

### 计算过程

**第1步：计算SE**
```
SE = √(8²/20 + 10²/25)
   = √(3.2 + 4)
   = √7.2
   ≈ 2.68
```

**第2步：计算t值**
```
t = (82 - 78) / 2.68
  = 4 / 2.68
  ≈ 1.49
```

**第3步：确定df**
```
df = 20 + 25 - 2 = 43
```

**第4步：查表得P值**
```
t = 1.49, df = 43 → P ≈ 0.143
```

**第5步：判断显著性**
```
P = 0.143 ≥ 0.05 → 不显著
结论：两班成绩无显著差异
```

---

## 🔍 显著性判断标准

| P值范围 | 显著性 | 标记 |
|--------|--------|------|
| P < 0.001 | 极显著 | *** |
| 0.001 ≤ P < 0.01 | 非常显著 | ** |
| 0.01 ≤ P < 0.05 | 显著 | * |
| P ≥ 0.05 | 不显著 | ns |

---

## 💻 Python代码

### 最简单的方法
```python
from scipy import stats

# 数据
group1 = [82, 85, 78, 88, 90]
group2 = [75, 78, 72, 80, 76]

# 计算P值
t_stat, p_value = stats.ttest_ind(group1, group2)
print(f"P值 = {p_value:.4f}")
```

### 手动计算方法
```python
import numpy as np
from scipy import stats

# 数据
group1 = [82, 85, 78, 88, 90]
group2 = [75, 78, 72, 80, 76]

# 基本统计量
mean1, mean2 = np.mean(group1), np.mean(group2)
std1, std2 = np.std(group1, ddof=1), np.std(group2, ddof=1)
n1, n2 = len(group1), len(group2)

# 第1步：计算SE
se = np.sqrt(std1**2/n1 + std2**2/n2)

# 第2步：计算t值
t = (mean1 - mean2) / se

# 第3步：计算df
df = n1 + n2 - 2

# 第4步：计算P值
p_value = 2 * (1 - stats.t.cdf(abs(t), df))

print(f"t值 = {t:.4f}")
print(f"P值 = {p_value:.4f}")
```

---

## 🎓 关键概念

### P值的含义
**P值 = 在原假设为真的情况下，观察到当前数据或更极端数据的概率**

### P值的解释
- **P值小** → 数据极端 → 原假设不可能 → 有显著差异
- **P值大** → 数据不极端 → 原假设可能 → 无显著差异

### P值的标准
- **P < 0.05** → 显著 → 拒绝原假设
- **P ≥ 0.05** → 不显著 → 接受原假设

---

## ⚠️ 常见错误

❌ **错误1**：P值是犯错的概率  
✅ **正确**：P值是在原假设为真时观察到数据的概率

❌ **错误2**：P值很小说明效应量很大  
✅ **正确**：P值小只说明显著，不说明效应量大小

❌ **错误3**：P = 0.049和P = 0.051没有区别  
✅ **正确**：按照0.05标准，一个显著，一个不显著

---

## 📋 快速查表

### 常见的t值对应的P值（df=30，双尾）

| t值 | P值 | 显著性 |
|-----|-----|--------|
| 1.70 | 0.10 | ns |
| 2.04 | 0.05 | * |
| 2.75 | 0.01 | ** |
| 3.65 | 0.001 | *** |

---

## 🚀 实际应用

### 场景1：药物效果测试
```
新药治愈率：80%（100人）
旧药治愈率：70%（100人）
计算 → P = 0.02 < 0.05
结论：新药效果显著优于旧药
```

### 场景2：教学方法对比
```
新方法平均分：85分（50人）
传统方法平均分：83分（50人）
计算 → P = 0.15 ≥ 0.05
结论：两种方法无显著差异
```

### 场景3：产品质量检测
```
产品合格率：92%（1000件）
预期合格率：95%
计算 → P = 0.001 < 0.05
结论：产品合格率显著低于预期
```

---

## 📚 推荐阅读

1. **详细版**：`P值计算详解.md` - 完整的步骤和例子
2. **术语解释**：术语解释页面 → 假设检验 → P值
3. **Python教程**：学习用scipy进行统计检验

---

**版本**：v1.0  
**类型**：快速参考  
**推荐使用**：需要快速查阅时
