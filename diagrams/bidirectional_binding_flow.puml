@startuml åŒå‘ç»‘å®šæµç¨‹å›¾
!theme plain
skinparam backgroundColor #FEFEFE
skinparam activityFontSize 13
skinparam activityArrowFontSize 12

title AIStats åŒå‘ç»‘å®šå®Œæ•´æµç¨‹å›¾\n(ä¸¤æ¬¡AIè°ƒç”¨ + ä¸€æ¬¡å‡½æ•°æ‰§è¡Œ)

|ç”¨æˆ·|
start
:ç”¨æˆ·è¾“å…¥è‡ªç„¶è¯­è¨€;
note right
  ç¤ºä¾‹ï¼š
  "å¸®æˆ‘çœ‹çœ‹ç”·å¥³ç”Ÿ
  æˆç»©æ˜¯å¦æœ‰å·®å¼‚"
end note

|AIç»‘å®šå±‚|
:æ„å»ºæ¶ˆæ¯ä¸Šä¸‹æ–‡;
note right
  messages = [
    system_prompt,
    user_message
  ]
  
  functions = [
    16ä¸ªç»Ÿè®¡å‡½æ•°å®šä¹‰
  ]
end note

partition "**ç¬¬ä¸€æ¬¡AIè°ƒç”¨**\nç†è§£æ„å›¾ + ç”Ÿæˆå‡½æ•°è°ƒç”¨" #LightBlue {
  :è°ƒç”¨DeepSeek LLM API;
  note right
    model="deepseek-chat"
    functions=DEFINITIONS
    function_call="auto"
  end note
  
  :LLMåˆ†æç”¨æˆ·æ„å›¾;
  note right
    1. è¯†åˆ«ä»»åŠ¡ç±»å‹ï¼šç»„é—´æ¯”è¾ƒ
    2. æå–å˜é‡ï¼šæˆç»©ã€æ€§åˆ«
    3. åŒ¹é…æ–¹æ³•ï¼šç‹¬ç«‹æ ·æœ¬tæ£€éªŒ
    4. æå–å‚æ•°ï¼š
       data_var="æˆç»©"
       group_var="æ€§åˆ«"
  end note
  
  :è¿”å›Function Call (JSON);
  note right
    {
      "function_call": {
        "name": "independent_t_test",
        "arguments": {
          "data_var": "æˆç»©",
          "group_var": "æ€§åˆ«"
        }
      },
      "content": null
    }
    
    âš ï¸ æ³¨æ„ï¼šæ²¡æœ‰è‡ªç„¶è¯­è¨€å›å¤ï¼
  end note
}

|ç³»ç»Ÿ|
:è§£æå‡½æ•°è°ƒç”¨æŒ‡ä»¤;

if (å‡½æ•°è°ƒç”¨å­˜åœ¨?) then (æ˜¯)
  |ç»Ÿè®¡å¼•æ“å±‚|
  partition "**å‡½æ•°æ‰§è¡Œé˜¶æ®µ**\nçœŸå®ç»Ÿè®¡è®¡ç®—" #LightGreen {
    :æå–å‡½æ•°åå’Œå‚æ•°;
    
    :éªŒè¯å‚æ•°;
    note right
      1. æ£€æŸ¥å˜é‡æ˜¯å¦å­˜åœ¨
      2. æ£€æŸ¥æ•°æ®ç±»å‹
      3. æ£€æŸ¥åˆ†ç»„æ•°é‡
    end note
    
    if (å‚æ•°éªŒè¯é€šè¿‡?) then (æ˜¯)
      :æ‰§è¡Œç»Ÿè®¡å‡½æ•°;
      note right
        def independent_t_test():
          - æå–ä¸¤ç»„æ•°æ®
          - è°ƒç”¨scipy.stats
          - è®¡ç®—tå€¼ã€på€¼
          - è®¡ç®—æ•ˆåº”é‡
      end note
      
      :è¿”å›ç»Ÿè®¡ç»“æœ (JSON);
      note right
        {
          "success": true,
          "t_statistic": 2.345,
          "p_value": 0.023,
          "mean1": 85.3,
          "mean2": 78.6,
          "cohens_d": 0.65
        }
      end note
    else (å¦)
      :è¿”å›é”™è¯¯ä¿¡æ¯;
      stop
    endif
  }
  
  |AIç»‘å®šå±‚|
  :æ„å»ºåŒ…å«ç»“æœçš„æ¶ˆæ¯;
  note right
    messages = [
      system_prompt,
      user_message,
      assistant_function_call,
      function_result â† çœŸå®ç»“æœ
    ]
  end note
  
  partition "**ç¬¬äºŒæ¬¡AIè°ƒç”¨**\nåŸºäºçœŸå®ç»“æœç”Ÿæˆè§£è¯»" #Pink {
    :è°ƒç”¨DeepSeek LLM API;
    note right
      model="deepseek-chat"
      messages=å¸¦ç»“æœçš„å®Œæ•´ä¸Šä¸‹æ–‡
      âš ï¸ è¿™æ¬¡ä¸ä¼ functionså‚æ•°
    end note
    
    :LLMåŸºäºçœŸå®æ•°æ®è§£è¯»;
    note right
      AIçœ‹åˆ°äº†çœŸå®çš„ç»Ÿè®¡ç»“æœï¼š
      - t=2.345
      - p=0.023 < 0.05 (æ˜¾è‘—)
      - å‡å€¼å·®=6.7åˆ†
      - æ•ˆåº”é‡=0.65 (ä¸­ç­‰)
      
      ç”Ÿæˆé€šä¿—æ˜“æ‡‚çš„è§£é‡Š...
    end note
    
    :è¿”å›è‡ªç„¶è¯­è¨€è§£é‡Š;
    note right
      "å·²ä¸ºæ‚¨å®Œæˆç‹¬ç«‹æ ·æœ¬tæ£€éªŒï¼
      
      ğŸ“Š åˆ†æç»“æœï¼š
      â€¢ ç”·ç”Ÿå¹³å‡ï¼š85.3åˆ†
      â€¢ å¥³ç”Ÿå¹³å‡ï¼š78.6åˆ†
      
      ğŸ“ˆ ç»Ÿè®¡æ£€éªŒï¼š
      â€¢ t=2.345, p=0.023 < 0.05 âœ…
      
      âœ… ç»“è®ºï¼š
      ç”·å¥³ç”Ÿæˆç»©å­˜åœ¨æ˜¾è‘—å·®å¼‚ï¼Œ
      ç”·ç”Ÿæˆç»©æ˜¾è‘—é«˜äºå¥³ç”Ÿã€‚"
    end note
  }
  
else (å¦ - æ™®é€šå¯¹è¯)
  :è¿”å›æ™®é€šå¯¹è¯å›å¤;
endif

|ç³»ç»Ÿ|
:æ›´æ–°å¯¹è¯å†å²;
note right
  ä¿å­˜å®Œæ•´ä¸Šä¸‹æ–‡ï¼š
  - ç”¨æˆ·è¾“å…¥
  - å‡½æ•°è°ƒç”¨
  - æ‰§è¡Œç»“æœ
  - AIè§£è¯»
end note

|ç”¨æˆ·|
:æ˜¾ç¤ºåˆ†æç»“æœå’ŒAIè§£é‡Š;
stop

legend right
  <b>åŒå‘ç»‘å®šçš„"åŒå‘"ï¼š</b>
  
  <b>æ­£å‘ç»‘å®š</b>ï¼šAI â†’ ç»Ÿè®¡å¼•æ“
  â€¢ AIç†è§£æ„å›¾
  â€¢ ç”Ÿæˆå‡½æ•°è°ƒç”¨
  â€¢ ç³»ç»Ÿæ‰§è¡Œè®¡ç®—
  
  <b>åå‘ç»‘å®š</b>ï¼šç»Ÿè®¡å¼•æ“ â†’ AI
  â€¢ ç»“æœå›ä¼ ç»™AI
  â€¢ AIåŸºäºçœŸå®æ•°æ®
  â€¢ ç”Ÿæˆæ™ºèƒ½è§£è¯»
  
  <b>å…³é”®ç‰¹ç‚¹ï¼š</b>
  â€¢ ä¸¤æ¬¡LLMè°ƒç”¨
  â€¢ ä¸€æ¬¡çœŸå®è®¡ç®—
  â€¢ åŸºäºäº‹å®ï¼Œéå¹»è§‰
  â€¢ å…¨è‡ªåŠ¨é—­ç¯
endlegend

@enduml

